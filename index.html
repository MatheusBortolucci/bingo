<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Cartelas de Bingo - Ch√° de Panela da Mari</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Bibliotecas para gera√ß√£o de PDF - vers√µes est√°veis -->
    <script src="https://unpkg.com/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    
    <!-- Bibliotecas QR ID√äNTICAS ao sorteio.html que funciona -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js" onload="console.log('QRCode v1 carregado')"></script>
    <script src="https://unpkg.com/qrcode@1.5.3/build/qrcode.js" onload="console.log('QRCode v2 carregado')"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js" onload="console.log('QRious carregado')"></script>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js" onload="console.log('QRCodeJS carregado')"></script>
    
    <script>
        // Verificar e garantir que QRCode funcione
        window.addEventListener('load', function() {
            console.log('üîç Verificando bibliotecas QR...');
            console.log('QRCode dispon√≠vel:', typeof QRCode);
            console.log('QRious dispon√≠vel:', typeof QRious);
            
            // Se QRCode n√£o estiver dispon√≠vel, tentar usar QRious como alternativa
            if (typeof QRCode === 'undefined' && typeof QRious !== 'undefined') {
                console.log('üîÑ Usando QRious como alternativa...');
                window.QRCode = {
                    toCanvas: function(element, text, options, callback) {
                        try {
                            const qr = new QRious({
                                element: element.tagName === 'CANVAS' ? element : null,
                                value: text,
                                size: options.width || 50,
                                background: options.color ? options.color.light : 'white',
                                foreground: options.color ? options.color.dark : 'black'
                            });
                            
                            if (element.tagName !== 'CANVAS') {
                                const canvas = document.createElement('canvas');
                                canvas.width = options.width || 50;
                                canvas.height = options.height || 50;
                                element.appendChild(canvas);
                                
                                const qrCanvas = new QRious({
                                    element: canvas,
                                    value: text,
                                    size: options.width || 50,
                                    background: options.color ? options.color.light : 'white',
                                    foreground: options.color ? options.color.dark : 'black'
                                });
                            }
                            
                            callback(null);
                        } catch (error) {
                            callback(error);
                        }
                    }
                };
            }
            
            if (typeof QRCode === 'undefined') {
                console.error('‚ùå Nenhuma biblioteca QR carregou!');
                // Tentar carregar manualmente
                const script = document.createElement('script');
                script.src = 'https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js';
                script.onload = function() {
                    console.log('‚úÖ QRCode manual carregado!');
                };
                document.head.appendChild(script);
            }
        });
    </script>
</head>
                script.onload = () => console.log('QRCode carregado via fallback');
                document.head.appendChild(script);
            }
        });
    </script>
</head>
<body>
    <header class="no-print">
        <h1>üéâ Gerador de Cartelas de Bingo üéâ</h1>
        <h2>Ch√° de Panela da Mari</h2>
    </header>

    <main>
        <div class="controls no-print">
            <button id="gerarCartelas" class="btn-primary">Gerar 35 Cartelas</button>
            <button id="gerarPDF" class="btn-secondary">üìÑ PDF Autom√°tico (Melhor Qualidade)</button>
            <button id="gerarPDFDireto" class="btn-secondary">üìÑ PDF Compatibilidade</button>
            <button id="imprimirCartelas" class="btn-tertiary">üñ®Ô∏è Imprimir Navegador</button>
            <button id="novasCartelas" class="btn-tertiary">üîÑ Gerar Novas Cartelas</button>
            <button id="testarCaptura" class="btn-tertiary" style="font-size: 0.8rem;">üîß Testar Captura</button>
            <button id="debugQR" class="btn-tertiary" style="font-size: 0.8rem; background-color: #ff9800;">üîç Debug QR</button>
            <button id="testarMobile" class="btn-tertiary" style="font-size: 0.8rem; background-color: #2196f3; color: white;">üì± Teste Mobile</button>
        </div>
        
        <div class="sorteio-link no-print">
            <a href="sorteio.html" class="btn-sorteio-link" onclick="window.open('sorteio.html', '_blank', 'width=800,height=600'); return false;">
                üì± Abrir Sorteio no Celular
            </a>
            <p class="sorteio-info">Use o sorteio separadamente no celular durante o evento!</p>
        </div>

        <div id="cartelas-container" class="cartelas-grid">
            <!-- As cartelas ser√£o geradas aqui -->
        </div>
    </main>

    <script src="script.js"></script>
</body>
</html>
